option ir_walk_tests
{
    
  initial state initial_
  {
	  decision
	  {
      if(button.remote == 1)
	    {
	      goto walk_forward;
	    }
	    else if(button.remote == 2)
	    {
	      goto walk_backward;
	    }
	    else if(button.remote == 3)
	    {
	      goto strafe_left;
	     }
	    else if(button.remote == 4)
	    {
	      goto strafe_right;
	    }
      else if(button.remote == 5)
      {
        goto turn_left;
      }
      else if(button.remote == 6)
      {
        goto turn_right;
      }
      else if(button.remote == 7)
      {
          goto stand;
      }
      else if(button.remote == 8)
      {
          goto init;
      }
      else
      {
        stay;
      }
        
	  }
    
    action
    {
      head.control_mode = stay_as_forced;
      head_control();
    }
  }

  state stand
  {
   decision
    {
      if(button.remote != 23 && button.remote != -1)
      {
        goto initial_;
      }
      else
      {
        stay;
      }
    }
    action
    {
        motion.type = stand;
    }
  }

  state init
  {
    decision
    {
      if(button.remote != 12 && button.remote != -1)
      {
        goto initial_;
      }
      else
      {
        stay;
      }
    }
    action
    {
        motion.type = init;
    }
  }

  state walk_forward
  {
    decision
    {
	    if(state_time > 20000)
	    {
	      goto stand;
	    }
	    else
	    {
	      stay;
	    }
    }
    action
    {
      motion.type = walk;
      motion.walk_speed.x = 100; // mm
      motion.walk_speed.y = 0; // mm
      motion.walk_speed.rot = 0; //deg 
      head_control();
    }
  }
  
  state walk_backward
  {
    decision
    {
      if(state_time > 20000)
      {
        goto stand;
      }
      else
      {
        stay;
      }
    }
    action
    {
      motion.type = walk;
      motion.walk_speed.x = -100; // mm
      motion.walk_speed.y = 0; // mm
      motion.walk_speed.rot = 0; //deg 
    }
  }
  
  state strafe_left
  {
    decision
    {
      if(state_time > 20000)
      {
        goto stand;
      }
      else
      {
        stay;
      }
    }
    action
    {
      motion.type = walk;
      motion.walk_speed.x = 0; // mm
      motion.walk_speed.y = 100; // mm
      motion.walk_speed.rot = 0; //deg 
    }
  }
  
  state strafe_right
  {
    decision
    {
      if(state_time > 20000)
      {
        goto stand;
      }
      else
      {
        stay;
      }
    }
    action
    {
      motion.type = walk;
      motion.walk_speed.x = 0; // mm
      motion.walk_speed.y = -100; // mm
      motion.walk_speed.rot = 0; //deg 
    }
  }
  state turn_left
  {
    decision
    {
      if(state_time > 20000)
      {
        goto stand;
      }
      else
      {
        stay;
      }
    }
    action
    {
     motion.type = walk; 
     motion.walk_speed.x = 0; //mm
     motion.walk_speed.y = 0; //mm
     motion.walk_speed.rot = 45; //deg
    }
  }

  state turn_right
  {
    decision
    {
      if(state_time > 20000)
      {
        goto stand;
      }
      else
      {
        stay;
      }
    }
    action
    {
     motion.type = walk; 
     motion.walk_speed.x = 0; //mm
     motion.walk_speed.y = 0; //mm
     motion.walk_speed.rot = -45; //deg
    }
  }
}