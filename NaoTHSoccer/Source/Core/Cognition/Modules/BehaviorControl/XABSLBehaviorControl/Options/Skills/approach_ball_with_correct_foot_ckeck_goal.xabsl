/** */
option approach_ball_with_correct_foot_ckeck_goal
{
  float @dist;

  /** error range */
  float @errorX [mm];

  float @errorY [mm];

  float @errorR [deg];
  
  common decision
  {
    if(action_done)
      goto finished;
  }
  
  initial state init {
    decision {
      else if(goal.opp.time_since_seen < 3000 && ball.time_since_last_seen < 3000)
      {
        goto look_for_ball;
      }
      else
      {
        goto look_for_goal;
      }
    }
    action {
    }
  }

  state look_for_goal {
    decision{
      else if(state_time > 1500 || ball.distance < 600)
        goto look_for_ball;
      else
        stay;
    }
    action 
    {
      approach_ball_with_correct_foot(dist = @dist,
                                      errorX=@errorX, errorY=@errorY, errorR=@errorR,
                                      want_to_turn_after_approach=true);
      head.control_mode = search_for_goal;
    }
  }

 state look_for_ball {
   decision{
     else if(state_time > 3000 && ball.distance > 1000)
       goto look_for_goal;
     else
       stay;
   }
    action 
    {
      approach_ball_with_correct_foot(dist = @dist,
                                      errorX=@errorX, errorY=@errorY, errorR=@errorR,
                                      want_to_turn_after_approach=true);
      head.control_mode = search_for_ball;
    }
  }

  target state finished {
   decision{
     else
       goto init;
   }
    action 
    {
      approach_ball_with_correct_foot(dist = @dist,
                                      errorX=@errorX, errorY=@errorY, errorR=@errorR,
                                      want_to_turn_after_approach=true);
      head.control_mode = search_for_ball;
    }
  }
}