// go to ball while avoiding obstacles using ultra sonic 
option path_go_to_ball_with_USOA
{
  float @distance;

  common decision {
    if (ball.preview.x < @distance)
        goto finished;
   }

  initial state go
  {
    decision
    {
      else if (ball.preview.x < @distance)
        goto finished;
      else
        stay;
    }
    action 
    {
      path.routine = go_to_ball;
      path.distance = @distance;
      
      //loook at percept
      head.control_mode = look_at_ball_percept;
    }
  }

  target state finished 
  {
    action{
      path.routine = go_to_ball;
      path.distance = @distance;
      
      //loook at percept
      head.control_mode = look_at_ball_percept;
    }
  }
}